# Directory Structure
# tractor_loan_app/
# ├── App.js
# ├── package.json
# ├── components/
# │   ├── FormStep1.js
# │   ├── FormStep2.js
# │   ├── FormStep3.js
# │   ├── Dashboard.js
# ├── README.md

# App.js
import React, { useState } from 'react';
import { NavigationContainer } from '@react-navigation/native';
import { createStackNavigator } from '@react-navigation/stack';
import { View, Text, StyleSheet } from 'react-native';
import FormStep1 from './components/FormStep1';
import FormStep2 from './components/FormStep2';
import FormStep3 from './components/FormStep3';
import Dashboard from './components/Dashboard';

const Stack = createStackNavigator();

const App = () => {
  const [formData, setFormData] = useState({
    personal: { name: '', dob: '', gender: '', contact: '', category: '', existingCustomer: '', cif: '' },
    financial: { loanAmount: '', tenure: '', repaymentFrequency: '', agriIncome: '', alliedIncome: '', otherIncome: '' },
    tractor: { type: '', manufacturer: '', model: '', hp: '', age: '', price: '', insurance: '', registrationFee: '' },
    documents: [],
  });

  return (
    <NavigationContainer>
      <Stack.Navigator initialRouteName="FormStep1">
        <Stack.Screen name="FormStep1" options={{ title: 'Personal Details' }}>
          {(props) => <FormStep1 {...props} formData={formData} setFormData={setFormData} />}
        </Stack.Screen>
        <Stack.Screen name="FormStep2" options={{ title: 'Financial & Loan Details' }}>
          {(props) => <FormStep2 {...props} formData={formData} setFormData={setFormData} />}
        </Stack.Screen>
        <Stack.Screen name="FormStep3" options={{ title: 'Tractor & Documents' }}>
          {(props) => <FormStep3 {...props} formData={formData} setFormData={setFormData} />}
        </Stack.Screen>
        <Stack.Screen name="Dashboard" component={Dashboard} options={{ title: 'Application Status' }} />
      </Stack.Navigator>
    </NavigationContainer>
  );
};

const styles = StyleSheet.create({
  container: { flex: 1, padding: 20, backgroundColor: '#f5f5f5' },
  title: { fontSize: 24, fontWeight: 'bold', marginBottom: 20, textAlign: 'center' },
});

export default App;

# package.json
{
  "name": "tractor_loan_app",
  "version": "1.0.0",
  "main": "App.js",
  "scripts": {
    "start": "react-native start",
    "android": "react-native run-android",
    "ios": "react-native run-ios"
  },
  "dependencies": {
    "@react-navigation/native": "^6.1.9",
    "@react-navigation/stack": "^6.3.20",
    "react": "18.2.0",
    "react-native": "0.73.0",
    "react-native-document-picker": "^9.1.1",
    "react-native-gesture-handler": "^2.13.4"
  },
  "devDependencies": {
    "@babel/core": "^7.23.2",
    "@babel/preset-env": "^7.23.2",
    "@babel/preset-react": "^7.22.15",
    "metro-react-native-babel-preset": "^0.77.0"
  }
}

# components/FormStep1.js
import React, { useState } from 'react';
import { View, Text, TextInput, Picker, Button, StyleSheet } from 'react-native';

const FormStep1 = ({ navigation, formData, setFormData }) => {
  const [personal, setPersonal] = useState(formData.personal);

  const handleNext = () => {
    setFormData({ ...formData, personal });
    navigation.navigate('FormStep2');
  };

  return (
    <View style={styles.container}>
      <Text style={styles.title}>Personal Details</Text>
      <TextInput
        style={styles.input}
        placeholder="Applicant Name"
        value={personal.name}
        onChangeText={(text) => setPersonal({ ...personal, name: text })}
      />
      <TextInput
        style={styles.input}
        placeholder="DOB (DD/MM/YYYY)"
        value={personal.dob}
        onChangeText={(text) => setPersonal({ ...personal, dob: text })}
      />
      <Picker
        selectedValue={personal.gender}
        style={styles.picker}
        onValueChange={(value) => setPersonal({ ...personal, gender: value })}
      >
        <Picker.Item label="Select Gender" value="" />
        <Picker.Item label="Male" value="Male" />
        <Picker.Item label="Female" value="Female" />
        <Picker.Item label="LGBTQ+" value="LGBTQ+" />
      </Picker>
      <TextInput
        style={styles.input}
        placeholder="Contact Number"
        value={personal.contact}
        onChangeText={(text) => setPersonal({ ...personal, contact: text })}
      />
      <Picker
        selectedValue={personal.category}
        style={styles.picker}
        onValueChange={(value) => setPersonal({ ...personal, category: value })}
      >
        <Picker.Item label="Select Farmer Category" value="" />
        <Picker.Item label="Small" value="Small" />
        <Picker.Item label="Marginal" value="Marginal" />
        <Picker.Item label="Other" value="Other" />
      </Picker>
      <Picker
        selectedValue={personal.existingCustomer}
        style={styles.picker}
        onValueChange={(value) => setPersonal({ ...personal, existingCustomer: value })}
      >
        <Picker.Item label="Existing/New Customer" value="" />
        <Picker.Item label="Existing" value="Existing" />
        <Picker.Item label="New" value="New" />
      </Picker>
      {personal.existingCustomer === 'Existing' && (
        <TextInput
          style={styles.input}
          placeholder="CIF Number"
          value={personal.cif}
          onChangeText={(text) => setPersonal({ ...personal, cif: text })}
        />
      )}
      <Button title="Next" onPress={handleNext} color="#1E90FF" />
    </View>
  );
};

const styles = StyleSheet.create({
  container: { flex: 1, padding: 20, backgroundColor: '#f5f5f5' },
  title: { fontSize: 24, fontWeight: 'bold', marginBottom: 20, textAlign: 'center' },
  input: { borderWidth: 1, borderColor: '#ccc', padding: 10, marginBottom: 10, borderRadius: 5 },
  picker: { borderWidth: 1, borderColor: '#ccc', marginBottom: 10, borderRadius: 5 },
});

export default FormStep1;

# components/FormStep2.js
import React, { useState } from 'react';
import { View, Text, TextInput, Picker, Button, StyleSheet } from 'react-native';

const FormStep2 = ({ navigation, formData, setFormData }) => {
  const [financial, setFinancial] = useState(formData.financial);

  const handleNext = () => {
    setFormData({ ...formData, financial });
    navigation.navigate('FormStep3');
  };

  return (
    <View style={styles.container}>
      <Text style={styles.title}>Financial & Loan Details</Text>
      <TextInput
        style={styles.input}
        placeholder="Loan Amount Requested (₹)"
        value={financial.loanAmount}
        onChangeText={(text) => setFinancial({ ...financial, loanAmount: text })}
        keyboardType="numeric"
      />
      <Picker
        selectedValue={financial.tenure}
        style={styles.picker}
        onValueChange={(value) => setFinancial({ ...financial, tenure: value })}
      >
        <Picker.Item label="Select Tenure (Months)" value="" />
        <Picker.Item label="12" value="12" />
        <Picker.Item label="24" value="24" />
        <Picker.Item label="36" value="36" />
        <Picker.Item label="48" value="48" />
        <Picker.Item label="60" value="60" />
        <Picker.Item label="72" value="72" />
        <Picker.Item label="84" value="84" />
      </Picker>
      <Picker
        selectedValue={financial.repaymentFrequency}
        style={styles.picker}
        onValueChange={(value) => setFinancial({ ...financial, repaymentFrequency: value })}
      >
        <Picker.Item label="Select Repayment Frequency" value="" />
        <Picker.Item label="Monthly" value="Monthly" />
        <Picker.Item label="Quarterly" value="Quarterly" />
        <Picker.Item label="Half Yearly" value="Half Yearly" />
      </Picker>
      <TextInput
        style={styles.input}
        placeholder="Agricultural Income (₹/year)"
        value={financial.agriIncome}
        onChangeText={(text) => setFinancial({ ...financial, agriIncome: text })}
        keyboardType="numeric"
      />
      <TextInput
        style={styles.input}
        placeholder="Allied Income (₹/year, e.g., dairy, machinery)"
        value={financial.alliedIncome}
        onChangeText={(text) => setFinancial({ ...financial, alliedIncome: text })}
        keyboardType="numeric"
      />
      <TextInput
        style={styles.input}
        placeholder="Other Income (₹/year, e.g., ITR, salary, rental)"
        value={financial.otherIncome}
        onChangeText={(text) => setFinancial({ ...financial, otherIncome: text })}
        keyboardType="numeric"
      />
      <Button title="Next" onPress={handleNext} color="#1E90FF" />
      <Button title="Back" onPress={() => navigation.goBack()} color="#FF6347" />
    </View>
  );
};

const styles = StyleSheet.create({
  container: { flex: 1, padding: 20, backgroundColor: '#f5f5f5' },
  title: { fontSize: 24, fontWeight: 'bold', marginBottom: 20, textAlign: 'center' },
  input: { borderWidth: 1, borderColor: '#ccc', padding: 10, marginBottom: 10, borderRadius: 5 },
  picker: { borderWidth: 1, borderColor: '#ccc', marginBottom: 10, borderRadius: 5 },
});

export default FormStep2;

# components/FormStep3.js
import React, { useState } from 'react';
import { View, Text, Button, StyleSheet, Alert } from 'react-native';
import DocumentPicker from 'react-native-document-picker';

const FormStep3 = ({ navigation, formData, setFormData }) => {
  const [tractor, setTractor] = useState(formData.tractor);
  const [documents, setDocuments] = useState(formData.documents);

  const pickDocument = async (docType) => {
    try {
      const res = await DocumentPicker.pick({
        type: [DocumentPicker.types.pdf, DocumentPicker.types.images],
      });
      const formData = new FormData();
      formData.append('file', {
        uri: res[0].uri,
        name: res[0].name,
        type: res[0].type,
      });
      formData.append('doc_type', docType);

      const response = await fetch('http://<your_server>/api/ocr/upload', {
        method: 'POST',
        headers: { 'API-Key': '<your_api_key>' },
        body: formData,
      });
      const result = await response.json();
      if (result.error) {
        Alert.alert('Error', result.error);
      } else {
        setDocuments([...documents, { docType, result }]);
      }
    } catch (err) {
      if (!DocumentPicker.isCancel(err)) {
        Alert.alert('Error', 'Failed to pick document');
      }
    }
  };

  const handleSubmit = () => {
    setFormData({ ...formData, tractor, documents });
    navigation.navigate('Dashboard');
  };

  return (
    <View style={styles.container}>
      <Text style={styles.title}>Tractor & Documents</Text>
      <Picker
        selectedValue={tractor.type}
        style={styles.picker}
        onValueChange={(value) => setTractor({ ...tractor, type: value })}
      >
        <Picker.Item label="Select Tractor Type" value="" />
        <Picker.Item label="New Tractor" value="New Tractor" />
        <Picker.Item label="Used Tractor" value="Used Tractor" />
      </Picker>
      <TextInput
        style={styles.input}
        placeholder="Manufacturer"
        value={tractor.manufacturer}
        onChangeText={(text) => setTractor({ ...tractor, manufacturer: text })}
      />
      <TextInput
        style={styles.input}
        placeholder="Model"
        value={tractor.model}
        onChangeText={(text) => setTractor({ ...tractor, model: text })}
      />
      <Picker
        selectedValue={tractor.hp}
        style={styles.picker}
        onValueChange={(value) => setTractor({ ...tractor, hp: value })}
      >
        <Picker.Item label="Select HP" value="" />
        <Picker.Item label="<=20" value="<=20" />
        <Picker.Item label="21-30" value="21-30" />
        <Picker.Item label="31-40" value="31-40" />
        <Picker.Item label="41-50" value="41-50" />
        <Picker.Item label=">50" value=">50" />
      </Picker>
      {tractor.type === 'Used Tractor' && (
        <TextInput
          style={styles.input}
          placeholder="Asset Age (Years)"
          value={tractor.age}
          onChangeText={(text) => setTractor({ ...tractor, age: text })}
          keyboardType="numeric"
        />
      )}
      <TextInput
        style={styles.input}
        placeholder="Bank Price (₹)"
        value={tractor.price}
        onChangeText={(text) => setTractor({ ...tractor, price: text })}
        keyboardType="numeric"
      />
      <TextInput
        style={styles.input}
        placeholder="Insurance Cost (₹)"
        value={tractor.insurance}
        onChangeText={(text) => setTractor({ ...tractor, insurance: text })}
        keyboardType="numeric"
      />
      <TextInput
        style={styles.input}
        placeholder="Registration Fee (₹)"
        value={tractor.registrationFee}
        onChangeText={(text) => setTractor({ ...tractor, registrationFee: text })}
        keyboardType="numeric"
      />
      <Button title="Upload Aadhaar" onPress={() => pickDocument('aadhaar')} color="#1E90FF" />
      <Button title="Upload PAN" onPress={() => pickDocument('pan')} color="#1E90FF" />
      <Button title="Upload Bank Statement" onPress={() => pickDocument('bank_statement')} color="#1E90FF" />
      <Button title="Upload Land Proof" onPress={() => pickDocument('land_proof')} color="#1E90FF" />
      {tractor.type === 'New Tractor' && (
        <Button title="Upload Quotation" onPress={() => pickDocument('quotation')} color="#1E90FF" />
      )}
      {tractor.type === 'Used Tractor' && (
        <>
          <Button title="Upload RC" onPress={() => pickDocument('rc')} color="#1E90FF" />
          <Button title="Upload Valuation Report" onPress={() => pickDocument('valuation')} color="#1E90FF" />
        </>
      )}
      <Button title="Submit" onPress={handleSubmit} color="#32CD32" />
      <Button title="Back" onPress={() => navigation.goBack()} color="#FF6347" />
    </View>
  );
};

const styles = StyleSheet.create({
  container: { flex: 1, padding: 20, backgroundColor: '#f5f5f5' },
  title: { fontSize: 24, fontWeight: 'bold', marginBottom: 20, textAlign: 'center' },
  input: { borderWidth: 1, borderColor: '#ccc', padding: 10, marginBottom: 10, borderRadius: 5 },
  picker: { borderWidth: 1, borderColor: '#ccc', marginBottom: 10, borderRadius: 5 },
});

export default FormStep3;

# components/Dashboard.js
import React from 'react';
import { View, Text, StyleSheet } from 'react-native';

const Dashboard = ({ route }) => {
  const formData = route.params?.formData || {};

  return (
    <View style={styles.container}>
      <Text style={styles.title}>Application Status</Text>
      <Text style={styles.section}>Personal Details:</Text>
      <Text>Name: {formData.personal?.name || 'Not provided'}</Text>
      <Text>DOB: {formData.personal?.dob || 'Not provided'}</Text>
      <Text>Gender: {formData.personal?.gender || 'Not provided'}</Text>
      <Text>Contact: {formData.personal?.contact || 'Not provided'}</Text>
      <Text>Category: {formData.personal?.category || 'Not provided'}</Text>
      <Text>Customer Type: {formData.personal?.existingCustomer || 'Not provided'}</Text>
      {formData.personal?.cif && <Text>CIF: {formData.personal.cif}</Text>}
      <Text style={styles.section}>Financial Details:</Text>
      <Text>Loan Amount: ₹{formData.financial?.loanAmount || 'Not provided'}</Text>
      <Text>Tenure: {formData.financial?.tenure || 'Not provided'} months</Text>
      <Text>Repayment Frequency: {formData.financial?.repaymentFrequency || 'Not provided'}</Text>
      <Text>Agricultural Income: ₹{formData.financial?.agriIncome || 'Not provided'}</Text>
      <Text>Allied Income: ₹{formData.financial?.alliedIncome || 'Not provided'}</Text>
      <Text>Other Income: ₹{formData.financial?.otherIncome || 'Not provided'}</Text>
      <Text style={styles.section}>Tractor Details:</Text>
      <Text>Type: {formData.tractor?.type || 'Not provided'}</Text>
      <Text>Manufacturer: {formData.tractor?.manufacturer || 'Not provided'}</Text>
      <Text>Model: {formData.tractor?.model || 'Not provided'}</Text>
      <Text>HP: {formData.tractor?.hp || 'Not provided'}</Text>
      {formData.tractor?.age && <Text>Asset Age: {formData.tractor.age} years</Text>}
      <Text>Price: ₹{formData.tractor?.price || 'Not provided'}</Text>
      <Text>Insurance: ₹{formData.tractor?.insurance || 'Not provided'}</Text>
      <Text>Registration Fee: ₹{formData.tractor?.registrationFee || 'Not provided'}</Text>
      <Text style={styles.section}>Documents:</Text>
      {formData.documents?.map((doc, index) => (
        <Text key={index}>{doc.docType}: {JSON.stringify(doc.result.fields)}</Text>
      ))}
      <Text style={styles.status}>Status: Submitted (Pending Verification)</Text>
    </View>
  );
};

const styles = StyleSheet.create({
  container: { flex: 1, padding: 20, backgroundColor: '#f5f5f5' },
  title: { fontSize: 24, fontWeight: 'bold', marginBottom: 20, textAlign: 'center' },
  section: { fontSize: 18, fontWeight: 'bold', marginTop: 20, marginBottom: 10 },
  status: { fontSize: 16, color: '#32CD32', marginTop: 20, textAlign: 'center' },
});

export default Dashboard;

# README.md
# Kisan Vahan Tractor Loan App

This React Native app facilitates tractor loan applications for new and used tractors, integrating with an OCR API for document processing. It supports farmers and non-farmers, capturing personal, financial, tractor, and document details as per the Kisan Vahan BRD.

## Setup Instructions
1. **Extract the ZIP**:
   - Unzip `tractor_loan_app.zip` to a folder (e.g., `tractor_loan_app`).

2. **Install Dependencies**:
   - Ensure Node.js is installed (`node --version`).
   - Install React Native CLI: `npm install -g react-native-cli`.
   - Navigate to the project folder: `cd tractor_loan_app`.
   - Run: `npm install`.

3. **Set Up OCR API**:
   - Deploy the OCR API (artifact_id: 463dc287-06fe-4140-ac0f-c7e1e69136f2) on a server.
   - Update `FormStep3.js` with the API URL and key:
     ```javascript
     fetch('http://<your_server>/api/ocr/upload', {
       method: 'POST',
       headers: { 'API-Key': '<your_api_key>' },
       ...
     });
     ```

4. **Run the App**:
   - Start the Metro bundler: `npm start`.
   - For Android: Connect a device/emulator and run `npm run android`.
   - For iOS: Install Xcode, then run `npm run ios`.
   - The app will open on the device/emulator.

## App Features
1. **Multi-Step Form**:
   - **Step 1 (Personal)**: Name, DOB, gender, contact, farmer category, existing/new customer, CIF.
   - **Step 2 (Financial)**: Loan amount, tenure, repayment frequency, agricultural/allied/other income.
   - **Step 3 (Tractor & Documents)**: Tractor type (new/used), manufacturer, model, HP, age (used), price, insurance, registration fee, document uploads (Aadhaar, PAN, bank statement, land proof, quotation, RC, valuation).
2. **OCR Integration**: Uploads documents to the OCR API, extracts fields (e.g., Aadhaar number, PAN number).
3. **Dashboard**: Displays submitted application details and status (pending verification).

## Integration in Banking Mobile App
1. **Form Submission**:
   - Users fill out the multi-step form and upload documents.
   - Documents are processed via the OCR API, extracting fields for KYC and verification.
2. **Backend Integration**:
   - Send form data and OCR results to your backend for verification:
     ```javascript
     fetch('http://<your_backend>/api/submit_loan', {
       method: 'POST',
       headers: { 'Content-Type': 'application/json' },
       body: JSON.stringify(formData),
     });
     ```
3. **Status Updates**:
   - Update the Dashboard with real-time status from your backend (e.g., "Approved", "Disbursed").

## Notes
- **Security**: Use HTTPS for API calls. Store sensitive data securely in your backend.
- **Field Extraction**: Enhance OCR API (`ocr/processor.py`) for specific fields (e.g., land proof: Patta number).
- **Backend**: Implement a backend to handle verification, approval, and disbursement logic.
- **Testing**: Test with sample documents compliant with India’s DPDP Act.

## Troubleshooting
- **Document Picker Errors**: Ensure `react-native-document-picker` permissions are granted.
- **OCR API Errors**: Verify the API server is running and the key is correct.
- **Build Issues**: Check Node.js and React Native versions (Node 16+, RN 0.73).

Contact: For customization, email support@xai.example (replace with your support email).